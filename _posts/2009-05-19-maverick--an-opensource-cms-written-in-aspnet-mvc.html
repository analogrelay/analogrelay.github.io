---
disqus_old: true
layout: post
title: "MaVeriCk - An Open-Source CMS written in ASP.Net MVC"
description: ""
category:
tags: []
permalink: /blog/2009/5/19/maverick-an-open-source-cms-written-in-aspnet-mvc.html
---
<p>This is a big post, I know, but I think it'll be worth it.&#160; If you don't have time to read it all, I organized it by importance, so the important stuff is at the top anyway :).</p>  <p>I've been hinting for a while that I've been working on a secret side project using ASP.Net MVC that was sort-of related to DotNetNuke.&#160; Well, it's finally time for me to put some code out there :).&#160; Today, I published a source code package containing version 0.1 of MaVeriCk, a Content Management System written in ASP.Net MVC.&#160; I'll explain what it is and how to get started in this blog post.</p>  <p><strong><u>Warning</u></strong>: MaVeriCk is <strong>nowhere near finished</strong>, and very much an <strong><u><em>alpha</em></u></strong> (maybe even a pre-alpha ;).&#160; Major features are completely missing (such as user management, and any useful modules, see below for details)</p>  <p><strong><u>Disclaimer</u></strong>: This project has <strong>NO RELATION</strong> to the DotNetNuke project.&#160; While I am a DNN Core Team member, this is purely a personal side-project.&#160; DotNetNuke has inspired some of the things I've done in MaVeriCk, but that's the extent of the connection between the two.</p>  <h3>What is MaVeriCk?</h3>  <p>Maverick is an open-source Content Management System in the style of *Nuke applications such as <a href="http://www.dotnetnuke.com">DotNetNuke</a>.&#160; For the rest of this post, I'm going to assume you're fairly familiar with that style of application.&#160; Basically, users create pages and drop little widgets (or "Modules"?) onto those pages to provide features like a Blog, Message Board, or even just a block of HTML.</p>  <h3>Where (and how) do I get it?</h3>  <p>The project is hosted on GitHub (<a title="http://github.com/anurse/MaVeriCk/" href="http://github.com/anurse/MaVeriCk/">http://github.com/anurse/MaVeriCk/</a>) so you can feel free to clone the repository and hack away there.&#160; Alternatively, if you either don't have Git or don't want to bother with getting the whole repository, you can download version 0.1.0, from the downloads section: <a title="http://github.com/anurse/MaVeriCk/downloads" href="http://github.com/anurse/MaVeriCk/downloads">http://github.com/anurse/MaVeriCk/downloads</a>.&#160; Also on the downloads page are the release notes for this version which include a full installation guide.&#160; Unfortunately, there is no automated installation system, but the steps are quite straightforward if you're familiar with ASP.Net.</p>  <p>Feel free to post comments on this blog, or send me email at: andrew AT andrewnurse DOT net </p>  <p>(After all, I'm just a junior programmer just out of college and don't purport to be an expert in the various development patterns and architectures, so if you think something doesn't look right, please let me know!)</p>  <h3></h3>  <h3>How does it work?</h3>  <p>The rest of this post will be a, very short, introduction to the Module Framework provided by Maverick.&#160; I'll be posting much more detailed information about the guts of Maverick later on, this is just a taste.&#160; Feel free to send me email (see above) if you have questions about the rest of the architecture, and don't be afraid to dive into the code!</p>  <p>Let's start by taking a look at a MaVeriCk page:</p>  <p><a href="https://s3.amazonaws.com/vibrantcode-res/blogcontent/imported/WindowsLiveWriter/MaVeriCkAnOpenSourceCMSwritteninA.NetMVC_C828/image_2.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="image" border="0" alt="image" src="https://s3.amazonaws.com/vibrantcode-res/blogcontent/imported/WindowsLiveWriter/MaVeriCkAnOpenSourceCMSwritteninA.NetMVC_C828/image_thumb.png" width="621" height="323" /></a> </p>  <p>Here, we see a page with two modules.&#160; The first module is an instance of the "Current Time" Module Application, the second is an instance of the "Claim Dumper" Module Application.&#160; A Module Application is an MVC Application, with its own Controllers and Views, which handles requests for a particular type of module.&#160; If you're familiar with DNN, the "Module Application" is analogous to the "Module Definition" concept in DNN.</p>  <p>Here's a look at the code for the Current Time Module Application:</p>  <pre class="csharp" name="code">[Export(typeof(ModuleApplication))]<br/>[ModuleApplication(ApplicationId, ApplicationName, &quot;1.0.0.0&quot;, &quot;Displays the Current Time&quot;, &quot;Maverick&quot;, &quot;~/Modules/CurrentTime/Content/Images/Icon.png&quot;)]<br/>public class CurrentTimeModuleApplication : ModuleApplication {<br/>    private const string ApplicationId = &quot;A1FE2A31-0BC9-4B12-9B81-3B75C098EB33&quot;;<br/>    private const string ApplicationName = &quot;Current Time&quot;;<br/><br/>    protected override string FolderPath {<br/>        get { return &quot;CurrentTime&quot;; }<br/>    }<br/><br/>    protected internal override void Init(MaverickApplication application) {<br/>        base.Init(application);<br/>        RegisterRoutes(Routes);<br/>    }<br/><br/>    private static void RegisterRoutes(RouteCollection routes) {<br/>        routes.RegisterDefaultRoute(&quot;Maverick.Web.Modules.CurrentTime.Controllers&quot;);<br/>    }<br/>}</pre><br/><br/><p>Compare this with the Global.asax file with an MVC app, and you'll find it's very similar.&#160; The "Init" method is equivalent to "Application_Start" and is called the first time the Module Application is run during the current ASP.Net Application's lifetime.&#160; Just as you would in an MVC 'Application_Start' method, the Current Time Application registers routes into a route table for this module application.&#160; In this case, the module is using a helper that Maverick provides to register the default route, but if we take a look at that helper, the only difference between the standard MVC route and this route is that we require that the namespace containing the Controllers is specified:</p><br/><br/><pre class="csharp" name="code">public static void RegisterDefaultRoute(this RouteCollection routes, string routeName, string defaultController, string defaultAction, string defaultId, string[] namespaces) {<br/>    routes.MapRoute(<br/>        routeName,<br/>        &quot;{controller}/{action}/{id}&quot;,<br/>        new {controller = defaultController, action = defaultAction, id = defaultId},<br/>        namespaces<br/>        );<br/>}</pre><br/><br/><p>(<strong>Note</strong>: there are various overrides to this method, including the one you see used by the CurrentTimeModuleApplication class above)</p><br/><br/><p>Routing in Maverick is a little more complex than in standard MVC applications.&#160; I'll go into more details on it later, but the gist of it is that a portion of the URL for a request is handled by Maverick, and the rest (if any) goes to one of the modules on the page (called the "Active" or "Selected" module).&#160; All the other modules (referred to as "Passive" modules) get an empty URL, and their default route is run.</p><br/><br/><p>From there on, a module is surprisingly similar to an MVC application.&#160; It has Controllers and Views, just like an MVC app.&#160; The big difference is that, in most cases, the ActionResult returned by a Controller does not represent the whole page, just a fragment of it.&#160; Maverick collects all the ActionResults for a page and then renders them out one-by-one in the correct location.&#160; Of course there are exceptions (for example, if a Module returns a FileResult or a RedirectResult), but that's the core of it.</p><br/><br/><h3></h3><br/><br/><p></p><br/><br/><p></p><br/><br/><h3>Missing Features</h3><br/><br/><p>Maverick is in an early preview state at the moment.&#160; There is a powerful authentication model available (or "Identity" model, as I call it), but at the moment, there's only a very simple "Debug" implementation of it (which just automatically logs you in as an Administrator).&#160; I have a prototype system which uses the Azure Access Control Service in the code, but it is not active by default (I'll post more about that later).</p><br/><br/><p>Maverick does not really include any useful modules, so you're on your own there.&#160; Module development is relatively simple, and will be the focus of another blog post.&#160; Feel free to check out the other modules for more info.&#160; The only major component of Module Development not covered in the provided sample modules is data storage.&#160; Maverick does have a system for modules to store data in the Maverick Database, but none of the built in modules do that.</p><br/><br/><p>There is a very rudimentary Theming system in place to allow you to create your own templates for the site (similar to DNN Skins).</p><br/><br/><p>Despite being touted as a Content Management System, Maverick doesn't actually contain any Content Management features :), no Workflow, no Versioning, no Content Approval.&#160; However, those features are planned for the future.</p><br/><br/><p>If you have any other suggestions, please let me know!</p>
