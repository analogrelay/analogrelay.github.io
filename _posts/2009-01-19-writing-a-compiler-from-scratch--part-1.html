---
disqus_old: true
layout: post
title: "Writing a Compiler from Scratch - Part 1"
description: ""
category:
tags: []
permalink: /blog/2009/1/19/writing-a-compiler-from-scratch-part-1.html
---
<p>EDIT: Whoops, wrote the wrong course number (CMPT 376), corrected below.&#160; I'm taking CMPT 376, Writing for Computer Scientists, this semester, must have gotten myself mixed up :)</p>  <p>Ok, I'm going to try something here, and I don't know if I'll manage to finish it.&#160; My all-time favorite class in my school career (so far) has been CMPT 379 - Compiler Design.&#160; The class basically consisted of me writing a compiler in Visual C++, with weekly lectures and code reviews from the professor (it was a small class).&#160; Since then, I've been trying to think of a reason to write a compiler (i.e. a language that can be ported to .Net, or a useful domain-specific language, etc.).&#160; Then, this morning, as I walked back to the Computing Science common room from the Gym (after my morning workout), I found a reason.&#160; I think compilers are some of the most interesting pieces of software, and I thought that if I wrote a series of blog posts in which I developed a compiler, maybe I could share that passion with others.&#160; </p>  <p>So, here's the plan:&#160; I've designed an, extremely simple, language that I'm going to walk through writing a compiler for.&#160; The initial version will target .Net IL code (since it's a stack machine system, which is much easier to generate code for).&#160; Once I've implemented the simple language, I think it'd be awesome if my readers could jump in and propose some ideas for new language features, and I'll try to blog about implementing them.</p>  <p>To be honest, this project may well fall flat on its face.&#160; Writing a compiler is not a simple task, no matter how simple the language.&#160; However, I do think it will be fun (while it lasts), so let's give it a try!</p>  <p>So, step one is: Define your language!&#160; The most essential part of compiler design is having a very clear idea of the purpose of your language.&#160; The language I'm going to design is called "Duh"?, because it's probably about as simple as it gets (maybe a little more complex than <a href="http://en.wikipedia.org/wiki/Brainf**k" target="_blank">Brainf**k</a> (NOTE: link target does include a few four-letter words :D)).&#160; Here's a sample Duh program</p>  <pre class="csharp" name="code">print &quot;Enter your age: &quot;;<br/>ageInput : string;<br/>age : int;<br/>ageInput = readline;<br/>age = ageInput -&gt; int;<br/>print &quot;In 10 years you will be &quot; + (age + 10) -&gt; string + &quot;. Wow, that's old&quot;</pre><br/><br/><p>Pretty simple, eh?&#160; Line 1 is a simple print statement, which accepts a string and write it to the console.&#160; Lines 2 and 3 declare variables of string and 32-bit integer types (decided to use a more Pascal-esque variable declaration format, just for fun).&#160; Lines 4 and 5 assign values to those variables.&#160; Line 4 uses another built-in function, readline, which reads a line of text from the console.&#160; Note that we don't even support initializing variables in the declaration!&#160; That's ok though, this is just a toy language, we can add initializations later.&#160; Line 5 introduces the "-&gt;" conversion operator, which takes the value on the left and converts it to the type on the right.&#160; It's not quite the same as a cast, because it will try to convert the value, if it can.&#160; Finally, we add 10 to the value the user entered and convert it to a string, then we place that string into a large message and print it to the console.</p><br/><br/><p>Well, here goes nothing!&#160; Feel free to post your initial comments.&#160; I hope you'll follow along!&#160; I'll be posting full source code with every post</p>
